میخام کل کد هارو بررسی کنی
من یک داشبور برای مدیریت محصولات به صورت عمده با چند تا مشتری دارم 
که میخام یک سیستم مدریتی پیشرفته بشه

; بخش اول

 در سیستم فعلی برای هر مشتری به صورت جداگانه  یک  بخشی برای نمایش محصولات خریدش داره
 که اون هم به صورت ماهانه دسته بندی شده نمایش داده میشه و امکان این هست که  از محصولات یک ماه به عنوان فاکتور خروجی  گرفت

; بخش دوم

یک بخشی در سیستم فعلی هست به عنوان پرداختی ها که در اون هم مشتری ها به صورت جداگانه دستبندی شده اند
پرداختی ها قسمتی هست که مشتری ها مبلغی از بهدیهای خود را پاس میکنند(کسر از بدهی)
به این این صورت در اون صفحه ثیت و آرشیو میشه



; چیزی که من میخام

من میخام این دوتا بخش به هم وصل بشن
برای هر فاکترو ماهانه محصولات هر مشتری یک بخش اضافه بشه که در اون "حساب قبلی"
 مشتری نمایش داده بشه که قراره اون اطلاعات رو  از مجموع قیمت های ثبت  شده برای اون مشتری از اولین تاریخ تا تاریخ اون ماه "تاکیید میکنم"
 اگه مثلا مشتری از تاریخ 
 1404/1/1
 از محصولات ما خرید کرده تا تاریخ
 1404/6/30

 من اگه بخواهم فاکتور هر یک از تاریخ هارو ببینم  حسبا قبلی هم باید تا اون ماه حساب بشه و نمایش داده بشه
 یعنی من اگه فاکتور  تاریخ
 1404/5 رو بخام 
 حساب قبلی باید جمع قیمت ها محصوللات اون مشتری از روز اول تا تاریخ 1404/5باشه


;2 چیزی که من میخام

من میخام در همین فاکتور ها یک بخشی هم اضافه بشه به اسم مبلغ پرداختی مشتری
یعنی در تاریخ 1404/5
مشتری  10میلیون حساب قبلی داره  + 2ملیون هم حساب این ماه یعنی این فاکترو میشه   -  مبلغ پرداختی که مشتری برایبدهیش پرداخت کرده از کل حساب  کسر بشه

;  من اطلاعات جدول های دیتابیس رو برات میفرستم و میخا بهم بگی ک چه فیلد هایی برای چه جدول هایی باید اضافه بشه تا بهترین نتیجه رو بگیرم

; بخش مشتری ها
DROP TABLE IF EXISTS `buyers`;
CREATE TABLE IF NOT EXISTS `buyers` (
  `id` int NOT NULL AUTO_INCREMENT,
  `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `buyers`
--

INSERT INTO `buyers` (`id`, `name`) VALUES
(1, 'هادی'),
(2, 'مهیار'),
(3, 'احمد');

; بخش پرداختی ها


DROP TABLE IF EXISTS `payments`;
CREATE TABLE IF NOT EXISTS `payments` (
  `id` int NOT NULL AUTO_INCREMENT,
  `target` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL,
  `amount` decimal(10,2) NOT NULL,
  `payment_date` date NOT NULL,
  `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=11 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `payments`
--

INSERT INTO `payments` (`id`, `target`, `amount`, `payment_date`, `created_at`) VALUES
(10, 'هادی', 5555.00, '2025-09-19', '2025-09-19 19:10:19');


; 
--
-- Table structure for table `purchases`
--

DROP TABLE IF EXISTS `purchases`;
CREATE TABLE IF NOT EXISTS `purchases` (
  `id` int NOT NULL AUTO_INCREMENT,
  `buyer_id` int NOT NULL,
  `product_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL,
  `unit_price` decimal(15,2) NOT NULL,
  `quantity` int NOT NULL,
  `total_price` decimal(15,2) GENERATED ALWAYS AS ((`unit_price` * `quantity`)) STORED,
  `purchase_date` date NOT NULL,
  PRIMARY KEY (`id`),
  KEY `buyer_id` (`buyer_id`)
) ENGINE=MyISAM AUTO_INCREMENT=12 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `purchases`
--

INSERT INTO `purchases` (`id`, `buyer_id`, `product_name`, `unit_price`, `quantity`, `purchase_date`) VALUES
(5, 1, 'سرهم', 800.00, 10, '2025-09-01'),
(3, 2, 'سرهم', 1500.00, 4, '2025-09-01'),
(4, 2, 'باتری', 2000.00, 10, '2025-09-01'),
(6, 1, 'باتری', 10000.00, 15000, '2025-09-01'),
(7, 1, 'سرهم', 100000.00, 10, '2025-08-01'),
(9, 3, 'باتری', 1600.00, 6, '2025-09-01');






میخام مسیر راه رو کامل باجزیییات بالا بهم بگی